services:
  mira:
    build: .
    volumes:
      - mira-data:/app/data
    environment:
      - DATABASE_URL=sqlite:///app/data/mira.db
      - QDRANT_URL=http://qdrant:6334
    depends_on:
      - qdrant
    stdin_open: true

  qdrant:
    image: qdrant/qdrant:latest
    restart: unless-stopped
    volumes:
      - qdrant-data:/qdrant/storage
    ports:
      - "6333:6333"
      - "6334:6334"

volumes:
  mira-data:
  qdrant-data:
