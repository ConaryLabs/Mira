# finding

Manage code review findings generated by expert consultations. List, inspect, review (accept/reject), and extract learned patterns from findings.

## Usage

```json
{
  "name": "finding",
  "arguments": {
    "action": "list",
    "status": "pending"
  }
}
```

## Parameters

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| action | String | Yes | Action to perform: `list`, `get`, `review`, `stats`, `patterns`, or `extract` |
| finding_id | Integer | Conditional | Finding ID (required for `get`, required for single `review`) |
| finding_ids | Array[Integer] | Conditional | Finding IDs for bulk `review` |
| status | String | No | Filter by status for `list`, or new status for `review`: `pending`, `accepted`, `rejected`, `fixed` |
| feedback | String | No | Explanation of review decision (for single `review`, helps pattern learning) |
| file_path | String | No | Filter findings by file path (for `list`) |
| expert_role | String | No | Filter by expert role (for `list`): `code_reviewer`, `security`, `architect`, `scope_analyst`, `plan_reviewer` |
| correction_type | String | No | Filter by correction type (for `patterns`): `bug`, `style`, `security`, `performance` |
| limit | Integer | No | Max results (default: 20, for `list` and `patterns`) |

### Actions

| Action | Description | Required Params |
|--------|-------------|-----------------|
| `list` | List findings with optional filters | `action` |
| `get` | Get full details of a specific finding | `action`, `finding_id` |
| `review` | Accept, reject, or mark fixed (single or bulk) | `action`, `finding_id` or `finding_ids`, `status` |
| `stats` | Get finding statistics for the project | `action` |
| `patterns` | Get learned correction patterns | `action` |
| `extract` | Extract new patterns from accepted findings | `action` |

## Returns

### `list`

Formatted list with severity icons and summary info:

```
5 findings (pending: 3, accepted: 1, rejected: 1):

  [!] 42 code_quality - src/handler.rs (pending)
     Missing error handling for database timeout...
     Suggestion: Wrap the call in a timeout with...

  [!!] 43 security - src/auth.rs (pending)
     SQL injection vulnerability in user query...
```

Severity icons: `[!!]` critical, `[!]` major, `[-]` minor, `[.]` other.

### `get`

Full finding details including content, code snippet, suggestion, confidence, and review history.

### `review`

- Single: `Finding {id} marked as '{status}' with feedback: {feedback}`
- Bulk: `Updated X of Y findings to '{status}'`

### `stats`

```
Review Finding Statistics:
  Total: 25
  Pending: 10
  Accepted: 12
  Rejected: 2
  Fixed: 1
  Acceptance rate: 85.7%
```

### `patterns`

Learned correction patterns with confidence and occurrence counts:

```
3 learned patterns:

[1] security (confidence: 90%, seen: 5x, acceptance: 100%)
  Problem: SQL query built with string concatenation
  Fix: Use parameterized queries with bound values
```

### `extract`

Reports how many new patterns were extracted from accepted findings with suggestions.

## Examples

**Example 1: List pending security findings**
```json
{
  "name": "finding",
  "arguments": {
    "action": "list",
    "status": "pending",
    "expert_role": "security"
  }
}
```

**Example 2: Accept a finding with feedback**
```json
{
  "name": "finding",
  "arguments": {
    "action": "review",
    "finding_id": 42,
    "status": "accepted",
    "feedback": "Good catch, this needs proper error handling"
  }
}
```

**Example 3: Bulk reject multiple findings**
```json
{
  "name": "finding",
  "arguments": {
    "action": "review",
    "finding_ids": [10, 11, 12],
    "status": "rejected"
  }
}
```

## Errors

- **"No active project"**: Requires an active project context.
- **"finding_id is required for action 'get'"**: The `get` action needs a `finding_id`.
- **"finding_id or finding_ids required"**: The `review` action needs either `finding_id` or `finding_ids`.
- **"status is required"**: The `review` action requires a target status.
- **"Finding {id} not found"**: The specified finding does not exist.
- **Only pending findings can be reviewed**: Already-reviewed findings cannot be re-reviewed.

## See Also

- [**expert**](./expert.md): Expert consultations that generate findings
- `code(action="diff")`: Diff analysis that can trigger code review
- **documentation**: Similar action-based tool for managing documentation tasks
